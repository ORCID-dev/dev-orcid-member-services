map $cookie_locale $langCode {
  default en;
  ~*^cs cs;
  ~*^de de;
  ~*^es es;
  ~*^fr fr;
  ~*^it it;
  ~*^ja ja;
  ~*^ko ko;
  ~*^pt pt;
  ~*^ru ru;
  ~*^ui ui;
  ~*^zh-CN zh-CN;
  ~*^zh-TW zh-TW;
}

server {
  listen       8090;
  server_name  localhost;

  # Uncomment logfile entries for debug of requests recieved by this virtual host.
  #access_log  /var/log/nginx/host.access.log  main;
  #error_log  /var/log/nginx/host.access.log  notice;

  location / {
    root   /usr/share/nginx/html;
    index  index.html index.htm;

    # The load balancer is configured to forward all requests prefixed with '/ui/' to this host
    # The following rewrite rule removes '/ui' from the uri so that files can be referenced relative to the document root path.:w
    rewrite  ^/ui/(.*)$ /$1 last;

    # Requires base href {in the index.html files} be set to "./" or "/ui/<langCode>/" e.g "/ui/it/" or "/ui/en/" #############################################################
    location ~ ^/(cs|de|en|es|fr|it|ja|ko|pt|ru|zh-CN|zh-TW)/(.*) {
      try_files $uri $uri/ /$1/index.html?$args;
    }

  }

}

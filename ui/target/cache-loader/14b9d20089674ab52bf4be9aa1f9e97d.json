{"remainingRequest":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\thread-loader\\dist\\cjs.js??ref--9-2!C:\\prgr\\orcid-member-services\\gateway\\node_modules\\ts-loader\\index.js??ref--9-3!C:\\prgr\\orcid-member-services\\gateway\\node_modules\\angular-router-loader\\src\\index.js!C:\\prgr\\orcid-member-services\\gateway\\node_modules\\tslint-loader\\index.js!C:\\prgr\\orcid-member-services\\gateway\\src\\main\\webapp\\app\\core\\language\\language.helper.ts","dependencies":[{"path":"C:\\prgr\\orcid-member-services\\gateway\\src\\main\\webapp\\app\\core\\language\\language.helper.ts","mtime":1663837715882},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\angular2-template-loader\\index.js","mtime":1663256168388},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663256170419},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1663256168812},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\ts-loader\\index.js","mtime":1663256162409},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\angular-router-loader\\src\\index.js","mtime":1663256183091},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\tslint-loader\\index.js","mtime":1663256174695}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOw0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsNCmNvbnN0IHRzbGliXzEgPSByZXF1aXJlKCJ0c2xpYiIpOw0KdmFyIF9hLCBfYiwgX2MsIF9kOw0KY29uc3QgY29yZV8xID0gcmVxdWlyZSgiQGFuZ3VsYXIvY29yZSIpOw0KY29uc3QgcGxhdGZvcm1fYnJvd3Nlcl8xID0gcmVxdWlyZSgiQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3NlciIpOw0KY29uc3Qgcm91dGVyXzEgPSByZXF1aXJlKCJAYW5ndWxhci9yb3V0ZXIiKTsNCmNvbnN0IGNvcmVfMiA9IHJlcXVpcmUoIkBuZ3gtdHJhbnNsYXRlL2NvcmUiKTsNCmNvbnN0IHJ4anNfMSA9IHJlcXVpcmUoInJ4anMiKTsNCmNvbnN0IGxhbmd1YWdlX2NvbnN0YW50c18xID0gcmVxdWlyZSgiYXBwL2NvcmUvbGFuZ3VhZ2UvbGFuZ3VhZ2UuY29uc3RhbnRzIik7DQpsZXQgSmhpTGFuZ3VhZ2VIZWxwZXIgPSBjbGFzcyBKaGlMYW5ndWFnZUhlbHBlciB7DQogICAgY29uc3RydWN0b3IodHJhbnNsYXRlU2VydmljZSwgdGl0bGVTZXJ2aWNlLCByb3V0ZXIsIHJvb3RSZW5kZXJlcikgew0KICAgICAgICB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UgPSB0cmFuc2xhdGVTZXJ2aWNlOw0KICAgICAgICB0aGlzLnRpdGxlU2VydmljZSA9IHRpdGxlU2VydmljZTsNCiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7DQogICAgICAgIHRoaXMucmVuZGVyZXIgPSBudWxsOw0KICAgICAgICB0aGlzLl9sYW5ndWFnZSA9IG5ldyByeGpzXzEuQmVoYXZpb3JTdWJqZWN0KHRoaXMudHJhbnNsYXRlU2VydmljZS5jdXJyZW50TGFuZyk7DQogICAgICAgIHRoaXMucmVuZGVyZXIgPSByb290UmVuZGVyZXIuY3JlYXRlUmVuZGVyZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLCBudWxsKTsNCiAgICAgICAgdGhpcy5pbml0KCk7DQogICAgfQ0KICAgIGdldEFsbCgpIHsNCiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShsYW5ndWFnZV9jb25zdGFudHNfMS5MQU5HVUFHRVMpOw0KICAgIH0NCiAgICBnZXQgbGFuZ3VhZ2UoKSB7DQogICAgICAgIHJldHVybiB0aGlzLl9sYW5ndWFnZS5hc09ic2VydmFibGUoKTsNCiAgICB9DQogICAgLyoqDQogICAgICogVXBkYXRlIHRoZSB3aW5kb3cgdGl0bGUgdXNpbmcgcGFyYW1zIGluIHRoZSBmb2xsb3dpbmcNCiAgICAgKiBvcmRlcjoNCiAgICAgKiAxLiB0aXRsZUtleSBwYXJhbWV0ZXINCiAgICAgKiAyLiAkc3RhdGUuJGN1cnJlbnQuZGF0YS5wYWdlVGl0bGUgKGN1cnJlbnQgc3RhdGUgcGFnZSB0aXRsZSkNCiAgICAgKiAzLiAnZ2xvYmFsLnRpdGxlJw0KICAgICAqLw0KICAgIHVwZGF0ZVRpdGxlKHRpdGxlS2V5KSB7DQogICAgICAgIGlmICghdGl0bGVLZXkpIHsNCiAgICAgICAgICAgIHRpdGxlS2V5ID0gdGhpcy5nZXRQYWdlVGl0bGUodGhpcy5yb3V0ZXIucm91dGVyU3RhdGUuc25hcHNob3Qucm9vdCk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmdldCh0aXRsZUtleSkuc3Vic2NyaWJlKHRpdGxlID0+IHsNCiAgICAgICAgICAgIHRoaXMudGl0bGVTZXJ2aWNlLnNldFRpdGxlKHRpdGxlKTsNCiAgICAgICAgfSk7DQogICAgfQ0KICAgIGluaXQoKSB7DQogICAgICAgIHRoaXMudHJhbnNsYXRlU2VydmljZS5vbkxhbmdDaGFuZ2Uuc3Vic2NyaWJlKChldmVudCkgPT4gew0KICAgICAgICAgICAgdGhpcy5fbGFuZ3VhZ2UubmV4dCh0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuY3VycmVudExhbmcpOw0KICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLCAnbGFuZycsIHRoaXMudHJhbnNsYXRlU2VydmljZS5jdXJyZW50TGFuZyk7DQogICAgICAgICAgICB0aGlzLnVwZGF0ZVRpdGxlKCk7DQogICAgICAgIH0pOw0KICAgIH0NCiAgICBnZXRQYWdlVGl0bGUocm91dGVTbmFwc2hvdCkgew0KICAgICAgICBsZXQgdGl0bGUgPSByb3V0ZVNuYXBzaG90LmRhdGEgJiYgcm91dGVTbmFwc2hvdC5kYXRhWydwYWdlVGl0bGUnXSA/IHJvdXRlU25hcHNob3QuZGF0YVsncGFnZVRpdGxlJ10gOiAnZ2F0ZXdheUFwcCc7DQogICAgICAgIGlmIChyb3V0ZVNuYXBzaG90LmZpcnN0Q2hpbGQpIHsNCiAgICAgICAgICAgIHRpdGxlID0gdGhpcy5nZXRQYWdlVGl0bGUocm91dGVTbmFwc2hvdC5maXJzdENoaWxkKSB8fCB0aXRsZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdGl0bGU7DQogICAgfQ0KfTsNCkpoaUxhbmd1YWdlSGVscGVyID0gdHNsaWJfMS5fX2RlY29yYXRlKFsNCiAgICBjb3JlXzEuSW5qZWN0YWJsZSh7IHByb3ZpZGVkSW46ICdyb290JyB9KSwNCiAgICB0c2xpYl8xLl9fbWV0YWRhdGEoImRlc2lnbjpwYXJhbXR5cGVzIiwgW3R5cGVvZiAoX2EgPSB0eXBlb2YgY29yZV8yLlRyYW5zbGF0ZVNlcnZpY2UgIT09ICJ1bmRlZmluZWQiICYmIGNvcmVfMi5UcmFuc2xhdGVTZXJ2aWNlKSA9PT0gImZ1bmN0aW9uIiA/IF9hIDogT2JqZWN0LCB0eXBlb2YgKF9iID0gdHlwZW9mIHBsYXRmb3JtX2Jyb3dzZXJfMS5UaXRsZSAhPT0gInVuZGVmaW5lZCIgJiYgcGxhdGZvcm1fYnJvd3Nlcl8xLlRpdGxlKSA9PT0gImZ1bmN0aW9uIiA/IF9iIDogT2JqZWN0LCB0eXBlb2YgKF9jID0gdHlwZW9mIHJvdXRlcl8xLlJvdXRlciAhPT0gInVuZGVmaW5lZCIgJiYgcm91dGVyXzEuUm91dGVyKSA9PT0gImZ1bmN0aW9uIiA/IF9jIDogT2JqZWN0LCB0eXBlb2YgKF9kID0gdHlwZW9mIGNvcmVfMS5SZW5kZXJlckZhY3RvcnkyICE9PSAidW5kZWZpbmVkIiAmJiBjb3JlXzEuUmVuZGVyZXJGYWN0b3J5MikgPT09ICJmdW5jdGlvbiIgPyBfZCA6IE9iamVjdF0pDQpdLCBKaGlMYW5ndWFnZUhlbHBlcik7DQpleHBvcnRzLkpoaUxhbmd1YWdlSGVscGVyID0gSmhpTGFuZ3VhZ2VIZWxwZXI7DQo="},{"version":3,"file":"C:\\prgr\\orcid-member-services\\gateway\\src\\main\\webapp\\app\\core\\language\\language.helper.ts","sourceRoot":"","sources":["C:\\prgr\\orcid-member-services\\gateway\\node_modules\\angular-router-loader\\src\\index.js!C:\\prgr\\orcid-member-services\\gateway\\node_modules\\tslint-loader\\index.js!C:\\prgr\\orcid-member-services\\gateway\\src\\main\\webapp\\app\\core\\language\\language.helper.ts"],"names":[],"mappings":";;;;AAAA,wCAAwE;AACxE,gEAAkD;AAClD,4CAAiE;AACjE,8CAAwE;AACxE,+BAAmD;AAEnD,6EAAiE;AAGjE,IAAa,iBAAiB,GAA9B,MAAa,iBAAiB;IAI5B,YACU,gBAAkC,EAClC,YAAmB,EACnB,MAAc,EACtB,YAA8B;QAHtB,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,iBAAY,GAAZ,YAAY,CAAO;QACnB,WAAM,GAAN,MAAM,CAAQ;QANxB,aAAQ,GAAc,IAAI,CAAC;QASzB,IAAI,CAAC,SAAS,GAAG,IAAI,sBAAe,CAAS,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;QAChF,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC,cAAc,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QAClF,IAAI,CAAC,IAAI,EAAE,CAAC;IACd,CAAC;IAED,MAAM;QACJ,OAAO,OAAO,CAAC,OAAO,CAAC,8BAAS,CAAC,CAAC;IACpC,CAAC;IAED,IAAI,QAAQ;QACV,OAAO,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;IACvC,CAAC;IAED;;;;;;OAMG;IACH,WAAW,CAAC,QAAiB;QAC3B,IAAI,CAAC,QAAQ,EAAE;YACb,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SACrE;QAED,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;YACpD,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,IAAI;QACV,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,KAAsB,EAAE,EAAE;YACtE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;YACvD,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;YACtG,IAAI,CAAC,WAAW,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,YAAY,CAAC,aAAqC;QACxD,IAAI,KAAK,GAAW,aAAa,CAAC,IAAI,IAAI,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;QAC3H,IAAI,aAAa,CAAC,UAAU,EAAE;YAC5B,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC;SAC9D;QACD,OAAO,KAAK,CAAC;IACf,CAAC;CACF,CAAA;AAvDY,iBAAiB;IAD7B,iBAAU,CAAC,EAAE,UAAU,EAAE,MAAM,EAAE,CAAC;iEAML,uBAAgB,oBAAhB,uBAAgB,oDACpB,wBAAK,oBAAL,wBAAK,oDACX,eAAM,oBAAN,eAAM,oDACR,uBAAgB,oBAAhB,uBAAgB;GARrB,iBAAiB,CAuD7B;AAvDY,8CAAiB","sourcesContent":["import { Injectable, RendererFactory2, Renderer2 } from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { Router, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { TranslateService, LangChangeEvent } from '@ngx-translate/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\nimport { LANGUAGES } from 'app/core/language/language.constants';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class JhiLanguageHelper {\r\n  renderer: Renderer2 = null;\r\n  private _language: BehaviorSubject<string>;\r\n\r\n  constructor(\r\n    private translateService: TranslateService,\r\n    private titleService: Title,\r\n    private router: Router,\r\n    rootRenderer: RendererFactory2\r\n  ) {\r\n    this._language = new BehaviorSubject<string>(this.translateService.currentLang);\r\n    this.renderer = rootRenderer.createRenderer(document.querySelector('html'), null);\r\n    this.init();\r\n  }\r\n\r\n  getAll(): Promise<any> {\r\n    return Promise.resolve(LANGUAGES);\r\n  }\r\n\r\n  get language(): Observable<string> {\r\n    return this._language.asObservable();\r\n  }\r\n\r\n  /**\r\n   * Update the window title using params in the following\r\n   * order:\r\n   * 1. titleKey parameter\r\n   * 2. $state.$current.data.pageTitle (current state page title)\r\n   * 3. 'global.title'\r\n   */\r\n  updateTitle(titleKey?: string) {\r\n    if (!titleKey) {\r\n      titleKey = this.getPageTitle(this.router.routerState.snapshot.root);\r\n    }\r\n\r\n    this.translateService.get(titleKey).subscribe(title => {\r\n      this.titleService.setTitle(title);\r\n    });\r\n  }\r\n\r\n  private init() {\r\n    this.translateService.onLangChange.subscribe((event: LangChangeEvent) => {\r\n      this._language.next(this.translateService.currentLang);\r\n      this.renderer.setAttribute(document.querySelector('html'), 'lang', this.translateService.currentLang);\r\n      this.updateTitle();\r\n    });\r\n  }\r\n\r\n  private getPageTitle(routeSnapshot: ActivatedRouteSnapshot) {\r\n    let title: string = routeSnapshot.data && routeSnapshot.data['pageTitle'] ? routeSnapshot.data['pageTitle'] : 'gatewayApp';\r\n    if (routeSnapshot.firstChild) {\r\n      title = this.getPageTitle(routeSnapshot.firstChild) || title;\r\n    }\r\n    return title;\r\n  }\r\n}\r\n"]}]}
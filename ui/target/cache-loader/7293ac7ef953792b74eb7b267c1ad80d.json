{"remainingRequest":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\thread-loader\\dist\\cjs.js??ref--9-2!C:\\prgr\\orcid-member-services\\gateway\\node_modules\\ts-loader\\index.js??ref--9-3!C:\\prgr\\orcid-member-services\\gateway\\node_modules\\angular-router-loader\\src\\index.js!C:\\prgr\\orcid-member-services\\gateway\\node_modules\\tslint-loader\\index.js!C:\\prgr\\orcid-member-services\\gateway\\src\\main\\webapp\\app\\account\\settings\\settings.component.ts","dependencies":[{"path":"C:\\prgr\\orcid-member-services\\gateway\\src\\main\\webapp\\app\\account\\settings\\settings.component.ts","mtime":1663837715745},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\angular2-template-loader\\index.js","mtime":1663256168388},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663256170419},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1663256168812},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\ts-loader\\index.js","mtime":1663256162409},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\angular-router-loader\\src\\index.js","mtime":1663256183091},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\tslint-loader\\index.js","mtime":1663256174695}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOw0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsNCmNvbnN0IHRzbGliXzEgPSByZXF1aXJlKCJ0c2xpYiIpOw0KdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTsNCmNvbnN0IGNvcmVfMSA9IHJlcXVpcmUoIkBhbmd1bGFyL2NvcmUiKTsNCmNvbnN0IGZvcm1zXzEgPSByZXF1aXJlKCJAYW5ndWxhci9mb3JtcyIpOw0KY29uc3QgbmdfamhpcHN0ZXJfMSA9IHJlcXVpcmUoIm5nLWpoaXBzdGVyIik7DQpjb25zdCBjb3JlXzIgPSByZXF1aXJlKCJhcHAvY29yZSIpOw0KY29uc3QgcGxhdGZvcm1fYnJvd3Nlcl8xID0gcmVxdWlyZSgiQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3NlciIpOw0KbGV0IFNldHRpbmdzQ29tcG9uZW50ID0gY2xhc3MgU2V0dGluZ3NDb21wb25lbnQgew0KICAgIGNvbnN0cnVjdG9yKGFjY291bnRTZXJ2aWNlLCBmYiwgbGFuZ3VhZ2VTZXJ2aWNlLCBsYW5ndWFnZUhlbHBlciwgc2FuaXRpemVyKSB7DQogICAgICAgIHRoaXMuYWNjb3VudFNlcnZpY2UgPSBhY2NvdW50U2VydmljZTsNCiAgICAgICAgdGhpcy5mYiA9IGZiOw0KICAgICAgICB0aGlzLmxhbmd1YWdlU2VydmljZSA9IGxhbmd1YWdlU2VydmljZTsNCiAgICAgICAgdGhpcy5sYW5ndWFnZUhlbHBlciA9IGxhbmd1YWdlSGVscGVyOw0KICAgICAgICB0aGlzLnNhbml0aXplciA9IHNhbml0aXplcjsNCiAgICAgICAgdGhpcy5zZXR0aW5nc0Zvcm0gPSB0aGlzLmZiLmdyb3VwKHsNCiAgICAgICAgICAgIGZpcnN0TmFtZTogW3VuZGVmaW5lZCwgW2Zvcm1zXzEuVmFsaWRhdG9ycy5yZXF1aXJlZCwgZm9ybXNfMS5WYWxpZGF0b3JzLm1pbkxlbmd0aCgxKSwgZm9ybXNfMS5WYWxpZGF0b3JzLm1heExlbmd0aCg1MCldXSwNCiAgICAgICAgICAgIGxhc3ROYW1lOiBbdW5kZWZpbmVkLCBbZm9ybXNfMS5WYWxpZGF0b3JzLnJlcXVpcmVkLCBmb3Jtc18xLlZhbGlkYXRvcnMubWluTGVuZ3RoKDEpLCBmb3Jtc18xLlZhbGlkYXRvcnMubWF4TGVuZ3RoKDUwKV1dLA0KICAgICAgICAgICAgZW1haWw6IFt1bmRlZmluZWQsIFtmb3Jtc18xLlZhbGlkYXRvcnMucmVxdWlyZWQsIGZvcm1zXzEuVmFsaWRhdG9ycy5taW5MZW5ndGgoNSksIGZvcm1zXzEuVmFsaWRhdG9ycy5tYXhMZW5ndGgoMjU0KSwgZm9ybXNfMS5WYWxpZGF0b3JzLmVtYWlsXV0sDQogICAgICAgICAgICBhY3RpdmF0ZWQ6IFtmYWxzZV0sDQogICAgICAgICAgICBhdXRob3JpdGllczogW1tdXSwNCiAgICAgICAgICAgIGxhbmdLZXk6IFsnZW4nXSwNCiAgICAgICAgICAgIGltYWdlVXJsOiBbXQ0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5tZmFGb3JtID0gdGhpcy5mYi5ncm91cCh7DQogICAgICAgICAgICBtZmFFbmFibGVkOiBbW11dLA0KICAgICAgICAgICAgdmVyaWZpY2F0aW9uQ29kZTogW10sDQogICAgICAgICAgICBzZWN1cml0eVNhdmU6IFtdDQogICAgICAgIH0pOw0KICAgIH0NCiAgICBuZ09uSW5pdCgpIHsNCiAgICAgICAgdGhpcy5zaG93TWZhU2V0dXAgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5zaG93TWZhVGV4dENvZGUgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5zaG93TWZhQmFja3VwQ29kZXMgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5hY2NvdW50U2VydmljZS5pZGVudGl0eSh0cnVlKS50aGVuKGFjY291bnQgPT4gew0KICAgICAgICAgICAgdGhpcy51cGRhdGVGb3JtKGFjY291bnQpOw0KICAgICAgICAgICAgdGhpcy51cGRhdGVNZmFGb3JtKGFjY291bnQpOw0KICAgICAgICAgICAgdGhpcy51c2VyTmFtZSA9IHRoaXMuYWNjb3VudFNlcnZpY2UuZ2V0VXNlck5hbWUoKTsNCiAgICAgICAgICAgIGlmICghYWNjb3VudC5tZmFFbmFibGVkKSB7DQogICAgICAgICAgICAgICAgdGhpcy5hY2NvdW50U2VydmljZS5nZXRNZmFTZXR1cCgpLnN1YnNjcmliZShyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm1mYVNldHVwID0gcmVzLmJvZHk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLmxhbmd1YWdlSGVscGVyLmdldEFsbCgpLnRoZW4obGFuZ3VhZ2VzID0+IHsNCiAgICAgICAgICAgIHRoaXMubGFuZ3VhZ2VzID0gbGFuZ3VhZ2VzOw0KICAgICAgICB9KTsNCiAgICB9DQogICAgbWZhRW5hYmxlZFN0YXRlQ2hhbmdlKCkgew0KICAgICAgICB0aGlzLnNob3dNZmFVcGRhdGVkID0gZmFsc2U7DQogICAgICAgIGNvbnN0IG1mYUVuYWJsZWQgPSB0aGlzLm1mYUZvcm0uZ2V0KCdtZmFFbmFibGVkJykudmFsdWU7DQogICAgICAgIGNvbnNvbGUubG9nKCdzZXR1cCBpcyAnICsgdGhpcy5tZmFTZXR1cCk7DQogICAgICAgIGlmIChtZmFFbmFibGVkICYmIHRoaXMubWZhU2V0dXApIHsNCiAgICAgICAgICAgIHRoaXMuc2hvd01mYVNldHVwID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMuc2hvd01mYUJhY2t1cENvZGVzID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB0aGlzLnNob3dNZmFTZXR1cCA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5zaG93TWZhQmFja3VwQ29kZXMgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICB0b2dnbGVNZmFUZXh0Q29kZSgpIHsNCiAgICAgICAgdGhpcy5zaG93TWZhVGV4dENvZGUgPSB0cnVlOw0KICAgIH0NCiAgICBzYXZlKCkgew0KICAgICAgICBjb25zdCBzZXR0aW5nc0FjY291bnQgPSB0aGlzLmFjY291bnRGcm9tRm9ybSgpOw0KICAgICAgICB0aGlzLmFjY291bnRTZXJ2aWNlLnNhdmUoc2V0dGluZ3NBY2NvdW50KS5zdWJzY3JpYmUoKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7DQogICAgICAgICAgICB0aGlzLnN1Y2Nlc3MgPSAnT0snOw0KICAgICAgICAgICAgdGhpcy5hY2NvdW50U2VydmljZS5pZGVudGl0eSh0cnVlKS50aGVuKGFjY291bnQgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRm9ybShhY2NvdW50KTsNCiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1mYUZvcm0oYWNjb3VudCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRoaXMubGFuZ3VhZ2VTZXJ2aWNlLmdldEN1cnJlbnQoKS50aGVuKGN1cnJlbnQgPT4gew0KICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc0FjY291bnQubGFuZ0tleSAhPT0gY3VycmVudCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxhbmd1YWdlU2VydmljZS5jaGFuZ2VMYW5ndWFnZShzZXR0aW5nc0FjY291bnQubGFuZ0tleSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sICgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuc3VjY2VzcyA9IG51bGw7DQogICAgICAgICAgICB0aGlzLmVycm9yID0gJ0VSUk9SJzsNCiAgICAgICAgfSk7DQogICAgfQ0KICAgIHNhdmVNZmEoKSB7DQogICAgICAgIGNvbnN0IGVuYWJsZWQgPSB0aGlzLm1mYUZvcm0uZ2V0KCdtZmFFbmFibGVkJykudmFsdWU7DQogICAgICAgIGlmIChlbmFibGVkKSB7DQogICAgICAgICAgICBjb25zdCBvdHAgPSB0aGlzLm1mYUZvcm0uZ2V0KCd2ZXJpZmljYXRpb25Db2RlJykudmFsdWU7DQogICAgICAgICAgICB0aGlzLm1mYVNldHVwLm90cCA9IG90cDsNCiAgICAgICAgICAgIHRoaXMuYWNjb3VudFNlcnZpY2UuZW5hYmxlTWZhKHRoaXMubWZhU2V0dXApLnN1YnNjcmliZShyZXMgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMubWZhQmFja3VwQ29kZXMgPSByZXMuYm9keTsNCiAgICAgICAgICAgICAgICB0aGlzLnNob3dNZmFCYWNrdXBDb2RlcyA9IHRydWU7DQogICAgICAgICAgICAgICAgdGhpcy5zaG93TWZhVXBkYXRlZCA9IHRydWU7DQogICAgICAgICAgICB9LCBlcnIgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMubWZhU2V0dXBGYWlsdXJlID0gdHJ1ZTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5hY2NvdW50U2VydmljZS5kaXNhYmxlTWZhKCkuc3Vic2NyaWJlKCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnNob3dNZmFVcGRhdGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB0aGlzLmFjY291bnRTZXJ2aWNlLmdldE1mYVNldHVwKCkuc3Vic2NyaWJlKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubWZhU2V0dXAgPSByZXMuYm9keTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0sIGVyciA9PiBjb25zb2xlLmxvZygnZXJyb3IgZGlzYWJsaW5nIG1mYScpKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBzYWZlUXJDb2RlKCkgew0KICAgICAgICByZXR1cm4gdGhpcy5zYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdFJlc291cmNlVXJsKCdkYXRhOmltYWdlL3BuZztiYXNlNjQsICcgKyB0aGlzLm1mYVNldHVwLnFyQ29kZSk7DQogICAgfQ0KICAgIGFjY291bnRGcm9tRm9ybSgpIHsNCiAgICAgICAgY29uc3QgYWNjb3VudCA9IHt9Ow0KICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgYWNjb3VudCwgeyBmaXJzdE5hbWU6IHRoaXMuc2V0dGluZ3NGb3JtLmdldCgnZmlyc3ROYW1lJykudmFsdWUsIGxhc3ROYW1lOiB0aGlzLnNldHRpbmdzRm9ybS5nZXQoJ2xhc3ROYW1lJykudmFsdWUsIGVtYWlsOiB0aGlzLnNldHRpbmdzRm9ybS5nZXQoJ2VtYWlsJykudmFsdWUsIGFjdGl2YXRlZDogdGhpcy5zZXR0aW5nc0Zvcm0uZ2V0KCdhY3RpdmF0ZWQnKS52YWx1ZSwgYXV0aG9yaXRpZXM6IHRoaXMuc2V0dGluZ3NGb3JtLmdldCgnYXV0aG9yaXRpZXMnKS52YWx1ZSwgbGFuZ0tleTogdGhpcy5zZXR0aW5nc0Zvcm0uZ2V0KCdsYW5nS2V5JykudmFsdWUsIGltYWdlVXJsOiB0aGlzLnNldHRpbmdzRm9ybS5nZXQoJ2ltYWdlVXJsJykudmFsdWUgfSk7DQogICAgfQ0KICAgIHVwZGF0ZUZvcm0oYWNjb3VudCkgew0KICAgICAgICB0aGlzLnNldHRpbmdzRm9ybS5wYXRjaFZhbHVlKHsNCiAgICAgICAgICAgIGZpcnN0TmFtZTogYWNjb3VudC5maXJzdE5hbWUsDQogICAgICAgICAgICBsYXN0TmFtZTogYWNjb3VudC5sYXN0TmFtZSwNCiAgICAgICAgICAgIGVtYWlsOiBhY2NvdW50LmVtYWlsLA0KICAgICAgICAgICAgYWN0aXZhdGVkOiBhY2NvdW50LmFjdGl2YXRlZCwNCiAgICAgICAgICAgIGF1dGhvcml0aWVzOiBhY2NvdW50LmF1dGhvcml0aWVzLA0KICAgICAgICAgICAgbGFuZ0tleTogYWNjb3VudC5sYW5nS2V5LA0KICAgICAgICAgICAgaW1hZ2VVcmw6IGFjY291bnQuaW1hZ2VVcmwNCiAgICAgICAgfSk7DQogICAgfQ0KICAgIHVwZGF0ZU1mYUZvcm0oYWNjb3VudCkgew0KICAgICAgICB0aGlzLm1mYUZvcm0ucGF0Y2hWYWx1ZSh7DQogICAgICAgICAgICBtZmFFbmFibGVkOiBhY2NvdW50Lm1mYUVuYWJsZWQNCiAgICAgICAgfSk7DQogICAgfQ0KfTsNClNldHRpbmdzQ29tcG9uZW50ID0gdHNsaWJfMS5fX2RlY29yYXRlKFsNCiAgICBjb3JlXzEuQ29tcG9uZW50KHsNCiAgICAgICAgc2VsZWN0b3I6ICdqaGktc2V0dGluZ3MnLA0KICAgICAgICB0ZW1wbGF0ZVVybDogJy4vc2V0dGluZ3MuY29tcG9uZW50Lmh0bWwnDQogICAgfSksDQogICAgdHNsaWJfMS5fX21ldGFkYXRhKCJkZXNpZ246cGFyYW10eXBlcyIsIFt0eXBlb2YgKF9hID0gdHlwZW9mIGNvcmVfMi5BY2NvdW50U2VydmljZSAhPT0gInVuZGVmaW5lZCIgJiYgY29yZV8yLkFjY291bnRTZXJ2aWNlKSA9PT0gImZ1bmN0aW9uIiA/IF9hIDogT2JqZWN0LCB0eXBlb2YgKF9iID0gdHlwZW9mIGZvcm1zXzEuRm9ybUJ1aWxkZXIgIT09ICJ1bmRlZmluZWQiICYmIGZvcm1zXzEuRm9ybUJ1aWxkZXIpID09PSAiZnVuY3Rpb24iID8gX2IgOiBPYmplY3QsIHR5cGVvZiAoX2MgPSB0eXBlb2YgbmdfamhpcHN0ZXJfMS5KaGlMYW5ndWFnZVNlcnZpY2UgIT09ICJ1bmRlZmluZWQiICYmIG5nX2poaXBzdGVyXzEuSmhpTGFuZ3VhZ2VTZXJ2aWNlKSA9PT0gImZ1bmN0aW9uIiA/IF9jIDogT2JqZWN0LCB0eXBlb2YgKF9kID0gdHlwZW9mIGNvcmVfMi5KaGlMYW5ndWFnZUhlbHBlciAhPT0gInVuZGVmaW5lZCIgJiYgY29yZV8yLkpoaUxhbmd1YWdlSGVscGVyKSA9PT0gImZ1bmN0aW9uIiA/IF9kIDogT2JqZWN0LCB0eXBlb2YgKF9lID0gdHlwZW9mIHBsYXRmb3JtX2Jyb3dzZXJfMS5Eb21TYW5pdGl6ZXIgIT09ICJ1bmRlZmluZWQiICYmIHBsYXRmb3JtX2Jyb3dzZXJfMS5Eb21TYW5pdGl6ZXIpID09PSAiZnVuY3Rpb24iID8gX2UgOiBPYmplY3RdKQ0KXSwgU2V0dGluZ3NDb21wb25lbnQpOw0KZXhwb3J0cy5TZXR0aW5nc0NvbXBvbmVudCA9IFNldHRpbmdzQ29tcG9uZW50Ow0K"},{"version":3,"file":"C:\\prgr\\orcid-member-services\\gateway\\src\\main\\webapp\\app\\account\\settings\\settings.component.ts","sourceRoot":"","sources":["C:\\prgr\\orcid-member-services\\gateway\\node_modules\\angular-router-loader\\src\\index.js!C:\\prgr\\orcid-member-services\\gateway\\node_modules\\tslint-loader\\index.js!C:\\prgr\\orcid-member-services\\gateway\\src\\main\\webapp\\app\\account\\settings\\settings.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { JhiLanguageService } from 'ng-jhipster';\r\nimport { AccountService, JhiLanguageHelper } from 'app/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Component({\r\n  selector: 'jhi-settings',\r\n  templateUrl: './settings.component.html'\r\n})\r\nexport class SettingsComponent implements OnInit {\r\n  error: string;\r\n  success: string;\r\n  languages: any[];\r\n  userName: string;\r\n  mfaSetup: any;\r\n  showMfaSetup: boolean;\r\n  showMfaTextCode: boolean;\r\n  mfaSetupFailure: boolean;\r\n  mfaBackupCodes: string[];\r\n  showMfaBackupCodes: boolean;\r\n  showMfaUpdated: boolean;\r\n  settingsForm = this.fb.group({\r\n    firstName: [undefined, [Validators.required, Validators.minLength(1), Validators.maxLength(50)]],\r\n    lastName: [undefined, [Validators.required, Validators.minLength(1), Validators.maxLength(50)]],\r\n    email: [undefined, [Validators.required, Validators.minLength(5), Validators.maxLength(254), Validators.email]],\r\n    activated: [false],\r\n    authorities: [[]],\r\n    langKey: ['en'],\r\n    imageUrl: []\r\n  });\r\n  mfaForm = this.fb.group({\r\n    mfaEnabled: [[]],\r\n    verificationCode: [],\r\n    securitySave: []\r\n  });\r\n\r\n  constructor(\r\n    private accountService: AccountService,\r\n    private fb: FormBuilder,\r\n    private languageService: JhiLanguageService,\r\n    private languageHelper: JhiLanguageHelper,\r\n    private sanitizer: DomSanitizer\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.showMfaSetup = false;\r\n    this.showMfaTextCode = false;\r\n    this.showMfaBackupCodes = false;\r\n    this.accountService.identity(true).then(account => {\r\n      this.updateForm(account);\r\n      this.updateMfaForm(account);\r\n      this.userName = this.accountService.getUserName();\r\n      if (!account.mfaEnabled) {\r\n        this.accountService.getMfaSetup().subscribe(res => {\r\n          this.mfaSetup = res.body;\r\n        });\r\n      }\r\n    });\r\n    this.languageHelper.getAll().then(languages => {\r\n      this.languages = languages;\r\n    });\r\n  }\r\n\r\n  mfaEnabledStateChange(): void {\r\n    this.showMfaUpdated = false;\r\n    const mfaEnabled = this.mfaForm.get('mfaEnabled').value;\r\n    console.log('setup is ' + this.mfaSetup);\r\n    if (mfaEnabled && this.mfaSetup) {\r\n      this.showMfaSetup = true;\r\n      this.showMfaBackupCodes = false;\r\n    } else {\r\n      this.showMfaSetup = false;\r\n      this.showMfaBackupCodes = false;\r\n    }\r\n  }\r\n\r\n  toggleMfaTextCode(): void {\r\n    this.showMfaTextCode = true;\r\n  }\r\n\r\n  save() {\r\n    const settingsAccount = this.accountFromForm();\r\n    this.accountService.save(settingsAccount).subscribe(\r\n      () => {\r\n        this.error = null;\r\n        this.success = 'OK';\r\n        this.accountService.identity(true).then(account => {\r\n          this.updateForm(account);\r\n          this.updateMfaForm(account);\r\n        });\r\n        this.languageService.getCurrent().then(current => {\r\n          if (settingsAccount.langKey !== current) {\r\n            this.languageService.changeLanguage(settingsAccount.langKey);\r\n          }\r\n        });\r\n      },\r\n      () => {\r\n        this.success = null;\r\n        this.error = 'ERROR';\r\n      }\r\n    );\r\n  }\r\n\r\n  saveMfa() {\r\n    const enabled = this.mfaForm.get('mfaEnabled').value;\r\n    if (enabled) {\r\n      const otp = this.mfaForm.get('verificationCode').value;\r\n      this.mfaSetup.otp = otp;\r\n      this.accountService.enableMfa(this.mfaSetup).subscribe(\r\n        res => {\r\n          this.mfaBackupCodes = res.body;\r\n          this.showMfaBackupCodes = true;\r\n          this.showMfaUpdated = true;\r\n        },\r\n        err => {\r\n          this.mfaSetupFailure = true;\r\n        }\r\n      );\r\n    } else {\r\n      this.accountService.disableMfa().subscribe(\r\n        () => {\r\n          this.showMfaUpdated = true;\r\n          this.accountService.getMfaSetup().subscribe(res => {\r\n            this.mfaSetup = res.body;\r\n          });\r\n        },\r\n        err => console.log('error disabling mfa')\r\n      );\r\n    }\r\n  }\r\n\r\n  safeQrCode() {\r\n    return this.sanitizer.bypassSecurityTrustResourceUrl('data:image/png;base64, ' + this.mfaSetup.qrCode);\r\n  }\r\n\r\n  private accountFromForm(): any {\r\n    const account = {};\r\n    return {\r\n      ...account,\r\n      firstName: this.settingsForm.get('firstName').value,\r\n      lastName: this.settingsForm.get('lastName').value,\r\n      email: this.settingsForm.get('email').value,\r\n      activated: this.settingsForm.get('activated').value,\r\n      authorities: this.settingsForm.get('authorities').value,\r\n      langKey: this.settingsForm.get('langKey').value,\r\n      imageUrl: this.settingsForm.get('imageUrl').value\r\n    };\r\n  }\r\n\r\n  updateForm(account: any): void {\r\n    this.settingsForm.patchValue({\r\n      firstName: account.firstName,\r\n      lastName: account.lastName,\r\n      email: account.email,\r\n      activated: account.activated,\r\n      authorities: account.authorities,\r\n      langKey: account.langKey,\r\n      imageUrl: account.imageUrl\r\n    });\r\n  }\r\n\r\n  updateMfaForm(account: any): void {\r\n    this.mfaForm.patchValue({\r\n      mfaEnabled: account.mfaEnabled\r\n    });\r\n  }\r\n}\r\n"]}]}
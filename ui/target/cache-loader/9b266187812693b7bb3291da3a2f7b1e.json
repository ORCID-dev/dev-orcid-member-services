{"remainingRequest":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\thread-loader\\dist\\cjs.js??ref--9-2!C:\\prgr\\orcid-member-services\\gateway\\node_modules\\ts-loader\\index.js??ref--9-3!C:\\prgr\\orcid-member-services\\gateway\\node_modules\\angular-router-loader\\src\\index.js!C:\\prgr\\orcid-member-services\\gateway\\node_modules\\tslint-loader\\index.js!C:\\prgr\\orcid-member-services\\gateway\\src\\main\\webapp\\app\\landing-page\\landing-page.component.ts","dependencies":[{"path":"C:\\prgr\\orcid-member-services\\gateway\\src\\main\\webapp\\app\\landing-page\\landing-page.component.ts","mtime":1663837716072},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\angular2-template-loader\\index.js","mtime":1663256168388},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663256170419},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1663256168812},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\ts-loader\\index.js","mtime":1663256162409},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\angular-router-loader\\src\\index.js","mtime":1663256183091},{"path":"C:\\prgr\\orcid-member-services\\gateway\\node_modules\\tslint-loader\\index.js","mtime":1663256174695}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOw0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsNCmNvbnN0IHRzbGliXzEgPSByZXF1aXJlKCJ0c2xpYiIpOw0KdmFyIF9hLCBfYiwgX2MsIF9kOw0KY29uc3QgY29yZV8xID0gcmVxdWlyZSgiQGFuZ3VsYXIvY29yZSIpOw0KY29uc3QgbmdfamhpcHN0ZXJfMSA9IHJlcXVpcmUoIm5nLWpoaXBzdGVyIik7DQpjb25zdCByb3V0ZXJfMSA9IHJlcXVpcmUoIkBhbmd1bGFyL3JvdXRlciIpOw0KY29uc3Qgcnhqc18xID0gcmVxdWlyZSgicnhqcyIpOw0KY29uc3QganNyc2FzaWduXzEgPSByZXF1aXJlKCJqc3JzYXNpZ24iKTsNCmNvbnN0IGxhbmRpbmdfcGFnZV9zZXJ2aWNlXzEgPSByZXF1aXJlKCIuL2xhbmRpbmctcGFnZS5zZXJ2aWNlIik7DQpjb25zdCBtZW1iZXJfc2VydmljZV8xID0gcmVxdWlyZSgiYXBwL2VudGl0aWVzL21lbWJlci9tZW1iZXIuc2VydmljZSIpOw0KY29uc3QgYXBwX2NvbnN0YW50c18xID0gcmVxdWlyZSgiYXBwL2FwcC5jb25zdGFudHMiKTsNCmxldCBMYW5kaW5nUGFnZUNvbXBvbmVudCA9IGNsYXNzIExhbmRpbmdQYWdlQ29tcG9uZW50IHsNCiAgICBjb25zdHJ1Y3RvcihldmVudE1hbmFnZXIsIGxhbmRpbmdQYWdlU2VydmljZSwgbXNNZW1iZXJTZXJ2aWNlLCByb3V0ZSkgew0KICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IGV2ZW50TWFuYWdlcjsNCiAgICAgICAgdGhpcy5sYW5kaW5nUGFnZVNlcnZpY2UgPSBsYW5kaW5nUGFnZVNlcnZpY2U7DQogICAgICAgIHRoaXMubXNNZW1iZXJTZXJ2aWNlID0gbXNNZW1iZXJTZXJ2aWNlOw0KICAgICAgICB0aGlzLnJvdXRlID0gcm91dGU7DQogICAgICAgIHRoaXMuaXNzdWVyID0gYXBwX2NvbnN0YW50c18xLk9SQ0lEX0JBU0VfVVJMOw0KICAgICAgICB0aGlzLm9hdXRoQmFzZVVybCA9IGFwcF9jb25zdGFudHNfMS5PUkNJRF9CQVNFX1VSTCArICcvb2F1dGgvYXV0aG9yaXplJzsNCiAgICAgICAgdGhpcy5yZWRpcmVjdFVyaSA9IGFwcF9jb25zdGFudHNfMS5CQVNFX1VSTCArICcvbGFuZGluZy1wYWdlJzsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zaG93Q29ubmVjdGlvbkV4aXN0cyA9IGZhbHNlOw0KICAgICAgICB0aGlzLnNob3dDb25uZWN0aW9uRXhpc3RzRGlmZmVyZW50VXNlciA9IGZhbHNlOw0KICAgICAgICB0aGlzLnNob3dEZW5pZWQgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5zaG93U3VjY2VzcyA9IGZhbHNlOw0KICAgICAgICB0aGlzLnByb2dyZXNzYmFyVmFsdWUgPSAxMDA7DQogICAgICAgIHRoaXMuY3VyU2VjID0gMDsNCiAgICB9DQogICAgbmdPbkluaXQoKSB7DQogICAgICAgIGNvbnN0IGlkX3Rva2VuX2ZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudFBhcmFtZXRlckJ5TmFtZSgnaWRfdG9rZW4nKTsNCiAgICAgICAgY29uc3QgYWNjZXNzX3Rva2VuX2ZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudFBhcmFtZXRlckJ5TmFtZSgnYWNjZXNzX3Rva2VuJyk7DQogICAgICAgIGNvbnN0IHN0YXRlX3BhcmFtID0gdGhpcy5nZXRRdWVyeVBhcmFtZXRlckJ5TmFtZSgnc3RhdGUnKTsNCiAgICAgICAgdGhpcy5sYW5kaW5nUGFnZVNlcnZpY2UuZ2V0T3JjaWRDb25uZWN0aW9uUmVjb3JkKHN0YXRlX3BhcmFtKS5zdWJzY3JpYmUoKHJlc3VsdCkgPT4gew0KICAgICAgICAgICAgdGhpcy5vcmNpZFJlY29yZCA9IHJlc3VsdC5ib2R5Ow0KICAgICAgICAgICAgdGhpcy5sYW5kaW5nUGFnZVNlcnZpY2UuZ2V0TWVtYmVySW5mbyhzdGF0ZV9wYXJhbSkuc3Vic2NyaWJlKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudE5hbWUgPSByZXMuYm9keS5jbGllbnROYW1lOw0KICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50SWQgPSByZXMuYm9keS5jbGllbnRJZDsNCiAgICAgICAgICAgICAgICB0aGlzLnNhbGVzZm9yY2VJZCA9IHJlcy5ib2R5LnNhbGVzZm9yY2VJZDsNCiAgICAgICAgICAgICAgICB0aGlzLm9hdXRoVXJsID0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYXV0aEJhc2VVcmwgKw0KICAgICAgICAgICAgICAgICAgICAgICAgJz9yZXNwb25zZV90eXBlPXRva2VuJnJlZGlyZWN0X3VyaT0nICsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVkaXJlY3RVcmkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgJyZjbGllbnRfaWQ9JyArDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWVudElkICsNCiAgICAgICAgICAgICAgICAgICAgICAgICcmc2NvcGU9L3JlYWQtbGltaXRlZCAvYWN0aXZpdGllcy91cGRhdGUgL3BlcnNvbi91cGRhdGUgb3BlbmlkJnByb21wdD1sb2dpbiZzdGF0ZT0nICsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlX3BhcmFtOw0KICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGlkIHRva2VuIGV4aXN0cyBpbiBVUkwgKHVzZXIganVzdCBncmFudGVkIHBlcm1pc3Npb24pDQogICAgICAgICAgICAgICAgaWYgKGlkX3Rva2VuX2ZyYWdtZW50ICE9IG51bGwgJiYgaWRfdG9rZW5fZnJhZ21lbnQgIT09ICcnKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tTdWJtaXRUb2tlbihpZF90b2tlbl9mcmFnbWVudCwgc3RhdGVfcGFyYW0sIGFjY2Vzc190b2tlbl9mcmFnbWVudCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IHRoaXMuZ2V0RnJhZ21lbnRQYXJhbWV0ZXJCeU5hbWUoJ2Vycm9yJyk7DQogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgZGVuaWVkIHBlcm1pc3Npb24NCiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yICE9IG51bGwgJiYgZXJyb3IgIT09ICcnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgPT09ICdhY2Nlc3NfZGVuaWVkJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0VXNlckRlbmllZChzdGF0ZV9wYXJhbSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dFcnJvckVsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHRoaXMub2F1dGhVcmwpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lcig2MDApOw0KICAgICAgICAgICAgfSwgKHJlcykgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sIChyZXMpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpOw0KICAgICAgICB9KTsNCiAgICB9DQogICAgZ2V0RnJhZ21lbnRQYXJhbWV0ZXJCeU5hbWUobmFtZSkgew0KICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFtdLywgJ1xcWycpLnJlcGxhY2UoL1tcXV0vLCAnXFxdJyk7DQogICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cCgnW1xcIyZdJyArIG5hbWUgKyAnPShbXiYjXSopJyksIHJlc3VsdHMgPSByZWdleC5leGVjKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTsNCiAgICAgICAgcmV0dXJuIHJlc3VsdHMgPT09IG51bGwgPyAnJyA6IGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzFdLnJlcGxhY2UoL1wrL2csICcgJykpOw0KICAgIH0NCiAgICBnZXRRdWVyeVBhcmFtZXRlckJ5TmFtZShuYW1lKSB7DQogICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcW1xdXS9nLCAnXFwkJicpOw0KICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoJ1s/Jl0nICsgbmFtZSArICcoPShbXiYjXSopfCZ8I3wkKScpLCByZXN1bHRzID0gcmVnZXguZXhlYyh3aW5kb3cubG9jYXRpb24uaHJlZik7DQogICAgICAgIGlmICghcmVzdWx0cykgew0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFyZXN1bHRzWzJdKSB7DQogICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1wrL2csICcgJykpOw0KICAgIH0NCiAgICBjaGVja1N1Ym1pdFRva2VuKGlkX3Rva2VuLCBzdGF0ZSwgYWNjZXNzX3Rva2VuKSB7DQogICAgICAgIHRoaXMubGFuZGluZ1BhZ2VTZXJ2aWNlLmdldFB1YmxpY0tleSgpLnN1YnNjcmliZShyZXMgPT4gew0KICAgICAgICAgICAgY29uc3QgcHViS2V5ID0ganNyc2FzaWduXzEuS0VZVVRJTC5nZXRLZXkocmVzLmtleXNbMF0pOw0KICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBqc3JzYXNpZ25fMS5LSlVSLmp3cy5KV1MudmVyaWZ5SldUKGlkX3Rva2VuLCBwdWJLZXksIHsNCiAgICAgICAgICAgICAgICBhbGc6IFsnUlMyNTYnXSwNCiAgICAgICAgICAgICAgICBpc3M6IFt0aGlzLmlzc3Vlcl0sDQogICAgICAgICAgICAgICAgYXVkOiB0aGlzLmNsaWVudElkLA0KICAgICAgICAgICAgICAgIGdyYWNlUGVyaW9kOiAxNSAqIDYwIC8vIDE1IG1pbnMgc2tldyBhbGxvd2VkDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGV4aXN0aW5nIHRva2VuIGJlbG9uZ3MgdG8gYSBkaWZmZXJlbnQgdXNlcg0KICAgICAgICAgICAgICAgIHRoaXMubGFuZGluZ1BhZ2VTZXJ2aWNlLnN1Ym1pdFVzZXJSZXNwb25zZSh7IGlkX3Rva2VuLCBzdGF0ZSwgc2FsZXNmb3JjZV9pZDogdGhpcy5zYWxlc2ZvcmNlSWQgfSkuc3Vic2NyaWJlKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXM7DQogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5pc0RpZmZlcmVudFVzZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dDb25uZWN0aW9uRXhpc3RzRGlmZmVyZW50VXNlckVsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5pc1NhbWVVc2VyVGhhdEFscmVhZHlHcmFudGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q29ubmVjdGlvbkV4aXN0c0VsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYW5kaW5nUGFnZVNlcnZpY2UuZ2V0VXNlckluZm8oYWNjZXNzX3Rva2VuKS5zdWJzY3JpYmUoKHJlc3VsdCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWduZWRJbklkVG9rZW4gPSByZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdpdmVuTmFtZSA9ICcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2lnbmVkSW5JZFRva2VuLmdpdmVuX25hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdpdmVuTmFtZSA9IHRoaXMuc2lnbmVkSW5JZFRva2VuLmdpdmVuX25hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZhbWlseU5hbWUgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpZ25lZEluSWRUb2tlbi5mYW1pbHlfbmFtZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmFtaWx5TmFtZSA9IHRoaXMuc2lnbmVkSW5JZFRva2VuLmZhbWlseV9uYW1lOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93U3VjY2Vzc0VsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgfSwgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RXJyb3JFbGVtZW50KCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0sICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RXJyb3JFbGVtZW50KCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNob3dFcnJvckVsZW1lbnQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwgKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5zaG93RXJyb3JFbGVtZW50KCk7DQogICAgICAgIH0pOw0KICAgIH0NCiAgICBzdWJtaXRJZFRva2VuRGF0YShpZF90b2tlbiwgc3RhdGUsIGFjY2Vzc190b2tlbikgew0KICAgICAgICB0aGlzLmxhbmRpbmdQYWdlU2VydmljZS5zdWJtaXRVc2VyUmVzcG9uc2UoeyBpZF90b2tlbiwgc3RhdGUgfSkuc3Vic2NyaWJlKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMubGFuZGluZ1BhZ2VTZXJ2aWNlLmdldFVzZXJJbmZvKGFjY2Vzc190b2tlbikuc3Vic2NyaWJlKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnNpZ25lZEluSWRUb2tlbiA9IHJlczsNCiAgICAgICAgICAgICAgICB0aGlzLnNob3dTdWNjZXNzRWxlbWVudCgpOw0KICAgICAgICAgICAgfSwgKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yRWxlbWVudCgpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sICgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yRWxlbWVudCgpOw0KICAgICAgICB9KTsNCiAgICB9DQogICAgc3VibWl0VXNlckRlbmllZChzdGF0ZSkgew0KICAgICAgICB0aGlzLmxhbmRpbmdQYWdlU2VydmljZS5zdWJtaXRVc2VyUmVzcG9uc2UoeyBkZW5pZWQ6IHRydWUsIHN0YXRlIH0pLnN1YnNjcmliZSgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLnNob3dEZW5pZWRFbGVtZW50KCk7DQogICAgICAgIH0sICgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yRWxlbWVudCgpOw0KICAgICAgICB9KTsNCiAgICB9DQogICAgc3RhcnRUaW1lcihzZWNvbmRzKSB7DQogICAgICAgIGNvbnN0IHRpbWVyID0gcnhqc18xLmludGVydmFsKDEwMCk7DQogICAgICAgIGNvbnN0IHN1YiA9IHRpbWVyLnN1YnNjcmliZShzZWMgPT4gew0KICAgICAgICAgICAgdGhpcy5wcm9ncmVzc2JhclZhbHVlID0gKHNlYyAqIDEwMCkgLyBzZWNvbmRzOw0KICAgICAgICAgICAgdGhpcy5jdXJTZWMgPSBzZWM7DQogICAgICAgICAgICBpZiAodGhpcy5jdXJTZWMgPT09IHNlY29uZHMpIHsNCiAgICAgICAgICAgICAgICBzdWIudW5zdWJzY3JpYmUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KICAgIHNob3dDb25uZWN0aW9uRXhpc3RzRWxlbWVudCgpIHsNCiAgICAgICAgdGhpcy5zaG93RGVuaWVkID0gZmFsc2U7DQogICAgICAgIHRoaXMuc2hvd0Vycm9yID0gZmFsc2U7DQogICAgICAgIHRoaXMuc2hvd1N1Y2Nlc3MgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5zaG93Q29ubmVjdGlvbkV4aXN0cyA9IHRydWU7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICB0aGlzLnNob3dDb25uZWN0aW9uRXhpc3RzRGlmZmVyZW50VXNlciA9IGZhbHNlOw0KICAgIH0NCiAgICBzaG93Q29ubmVjdGlvbkV4aXN0c0RpZmZlcmVudFVzZXJFbGVtZW50KCkgew0KICAgICAgICB0aGlzLnNob3dEZW5pZWQgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5zaG93U3VjY2VzcyA9IGZhbHNlOw0KICAgICAgICB0aGlzLnNob3dDb25uZWN0aW9uRXhpc3RzID0gZmFsc2U7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICB0aGlzLnNob3dDb25uZWN0aW9uRXhpc3RzRGlmZmVyZW50VXNlciA9IHRydWU7DQogICAgfQ0KICAgIHNob3dFcnJvckVsZW1lbnQoKSB7DQogICAgICAgIHRoaXMuc2hvd0RlbmllZCA9IGZhbHNlOw0KICAgICAgICB0aGlzLnNob3dFcnJvciA9IHRydWU7DQogICAgICAgIHRoaXMuc2hvd1N1Y2Nlc3MgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgIHRoaXMuc2hvd0Nvbm5lY3Rpb25FeGlzdHNEaWZmZXJlbnRVc2VyID0gZmFsc2U7DQogICAgfQ0KICAgIHNob3dEZW5pZWRFbGVtZW50KCkgew0KICAgICAgICB0aGlzLnNob3dEZW5pZWQgPSB0cnVlOw0KICAgICAgICB0aGlzLnNob3dFcnJvciA9IGZhbHNlOw0KICAgICAgICB0aGlzLnNob3dTdWNjZXNzID0gZmFsc2U7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICB0aGlzLnNob3dDb25uZWN0aW9uRXhpc3RzRGlmZmVyZW50VXNlciA9IGZhbHNlOw0KICAgIH0NCiAgICBzaG93U3VjY2Vzc0VsZW1lbnQoKSB7DQogICAgICAgIHRoaXMuc2hvd0RlbmllZCA9IGZhbHNlOw0KICAgICAgICB0aGlzLnNob3dFcnJvciA9IGZhbHNlOw0KICAgICAgICB0aGlzLnNob3dTdWNjZXNzID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgIHRoaXMuc2hvd0Nvbm5lY3Rpb25FeGlzdHNEaWZmZXJlbnRVc2VyID0gZmFsc2U7DQogICAgfQ0KfTsNCkxhbmRpbmdQYWdlQ29tcG9uZW50ID0gdHNsaWJfMS5fX2RlY29yYXRlKFsNCiAgICBjb3JlXzEuQ29tcG9uZW50KHsNCiAgICAgICAgc2VsZWN0b3I6ICdqaGktbGFuZGluZy1wYWdlJywNCiAgICAgICAgdGVtcGxhdGVVcmw6ICcuL2xhbmRpbmctcGFnZS5jb21wb25lbnQuaHRtbCcNCiAgICB9KSwNCiAgICB0c2xpYl8xLl9fbWV0YWRhdGEoImRlc2lnbjpwYXJhbXR5cGVzIiwgW3R5cGVvZiAoX2EgPSB0eXBlb2YgbmdfamhpcHN0ZXJfMS5KaGlFdmVudE1hbmFnZXIgIT09ICJ1bmRlZmluZWQiICYmIG5nX2poaXBzdGVyXzEuSmhpRXZlbnRNYW5hZ2VyKSA9PT0gImZ1bmN0aW9uIiA/IF9hIDogT2JqZWN0LCB0eXBlb2YgKF9iID0gdHlwZW9mIGxhbmRpbmdfcGFnZV9zZXJ2aWNlXzEuTGFuZGluZ1BhZ2VTZXJ2aWNlICE9PSAidW5kZWZpbmVkIiAmJiBsYW5kaW5nX3BhZ2Vfc2VydmljZV8xLkxhbmRpbmdQYWdlU2VydmljZSkgPT09ICJmdW5jdGlvbiIgPyBfYiA6IE9iamVjdCwgdHlwZW9mIChfYyA9IHR5cGVvZiBtZW1iZXJfc2VydmljZV8xLk1TTWVtYmVyU2VydmljZSAhPT0gInVuZGVmaW5lZCIgJiYgbWVtYmVyX3NlcnZpY2VfMS5NU01lbWJlclNlcnZpY2UpID09PSAiZnVuY3Rpb24iID8gX2MgOiBPYmplY3QsIHR5cGVvZiAoX2QgPSB0eXBlb2Ygcm91dGVyXzEuQWN0aXZhdGVkUm91dGUgIT09ICJ1bmRlZmluZWQiICYmIHJvdXRlcl8xLkFjdGl2YXRlZFJvdXRlKSA9PT0gImZ1bmN0aW9uIiA/IF9kIDogT2JqZWN0XSkNCl0sIExhbmRpbmdQYWdlQ29tcG9uZW50KTsNCmV4cG9ydHMuTGFuZGluZ1BhZ2VDb21wb25lbnQgPSBMYW5kaW5nUGFnZUNvbXBvbmVudDsNCg=="},{"version":3,"file":"C:\\prgr\\orcid-member-services\\gateway\\src\\main\\webapp\\app\\landing-page\\landing-page.component.ts","sourceRoot":"","sources":["C:\\prgr\\orcid-member-services\\gateway\\node_modules\\angular-router-loader\\src\\index.js!C:\\prgr\\orcid-member-services\\gateway\\node_modules\\tslint-loader\\index.js!C:\\prgr\\orcid-member-services\\gateway\\src\\main\\webapp\\app\\landing-page\\landing-page.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { HttpErrorResponse, HttpResponse } from '@angular/common/http';\r\nimport { NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\r\nimport { JhiEventManager } from 'ng-jhipster';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { interval, Subscription } from 'rxjs';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\nimport { KEYUTIL, KJUR } from 'jsrsasign';\r\nimport { LandingPageService } from './landing-page.service';\r\nimport { IMSMember } from 'app/shared/model/member.model';\r\nimport { MSMemberService } from 'app/entities/member/member.service';\r\nimport { BASE_URL, ORCID_BASE_URL } from 'app/app.constants';\r\n\r\n@Component({\r\n  selector: 'jhi-landing-page',\r\n  templateUrl: './landing-page.component.html'\r\n})\r\nexport class LandingPageComponent implements OnInit {\r\n  issuer: string = ORCID_BASE_URL;\r\n  oauthBaseUrl: string = ORCID_BASE_URL + '/oauth/authorize';\r\n  redirectUri: string = BASE_URL + '/landing-page';\r\n\r\n  loading: Boolean = true;\r\n  showConnectionExists: Boolean = false;\r\n  showConnectionExistsDifferentUser: Boolean = false;\r\n  showDenied: Boolean = false;\r\n  showError: Boolean = false;\r\n  showSuccess: Boolean = false;\r\n  key: any;\r\n  clientName: string;\r\n  salesforceId: string;\r\n  clientId: string;\r\n  orcidId: string;\r\n  oauthUrl: string;\r\n  orcidRecord: any;\r\n  signedInIdToken: any;\r\n  givenName: string;\r\n  familyName: string;\r\n  progressbarValue = 100;\r\n  curSec = 0;\r\n\r\n  constructor(\r\n    private eventManager: JhiEventManager,\r\n    private landingPageService: LandingPageService,\r\n    protected msMemberService: MSMemberService,\r\n    private route: ActivatedRoute\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    const id_token_fragment = this.getFragmentParameterByName('id_token');\r\n    const access_token_fragment = this.getFragmentParameterByName('access_token');\r\n    const state_param = this.getQueryParameterByName('state');\r\n\r\n    this.landingPageService.getOrcidConnectionRecord(state_param).subscribe(\r\n      (result: HttpResponse<any>) => {\r\n        this.orcidRecord = result.body;\r\n        this.landingPageService.getMemberInfo(state_param).subscribe(\r\n          (res: HttpResponse<IMSMember>) => {\r\n            this.clientName = res.body.clientName;\r\n            this.clientId = res.body.clientId;\r\n            this.salesforceId = res.body.salesforceId;\r\n            this.oauthUrl =\r\n              this.oauthBaseUrl +\r\n              '?response_type=token&redirect_uri=' +\r\n              this.redirectUri +\r\n              '&client_id=' +\r\n              this.clientId +\r\n              '&scope=/read-limited /activities/update /person/update openid&prompt=login&state=' +\r\n              state_param;\r\n            // Check if id token exists in URL (user just granted permission)\r\n            if (id_token_fragment != null && id_token_fragment !== '') {\r\n              this.checkSubmitToken(id_token_fragment, state_param, access_token_fragment);\r\n            } else {\r\n              const error = this.getFragmentParameterByName('error');\r\n              // Check if user denied permission\r\n              if (error != null && error !== '') {\r\n                if (error === 'access_denied') {\r\n                  this.submitUserDenied(state_param);\r\n                } else {\r\n                  this.showErrorElement();\r\n                }\r\n              } else {\r\n                window.location.replace(this.oauthUrl);\r\n              }\r\n            }\r\n\r\n            this.startTimer(600);\r\n          },\r\n          (res: HttpErrorResponse) => {\r\n            console.log('error');\r\n          }\r\n        );\r\n      },\r\n      (res: HttpErrorResponse) => {\r\n        console.log('error');\r\n      }\r\n    );\r\n  }\r\n\r\n  getFragmentParameterByName(name: string): string {\r\n    name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\r\n    const regex = new RegExp('[\\\\#&]' + name + '=([^&#]*)'),\r\n      results = regex.exec(window.location.hash);\r\n    return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\r\n  }\r\n\r\n  getQueryParameterByName(name: string): string {\r\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\r\n    const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\r\n      results = regex.exec(window.location.href);\r\n    if (!results) {\r\n      return null;\r\n    }\r\n    if (!results[2]) {\r\n      return '';\r\n    }\r\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\r\n  }\r\n\r\n  checkSubmitToken(id_token: string, state: string, access_token: string) {\r\n    this.landingPageService.getPublicKey().subscribe(\r\n      res => {\r\n        const pubKey = KEYUTIL.getKey(res.keys[0]);\r\n        const response = KJUR.jws.JWS.verifyJWT(id_token, pubKey, {\r\n          alg: ['RS256'],\r\n          iss: [this.issuer],\r\n          aud: this.clientId,\r\n          gracePeriod: 15 * 60 // 15 mins skew allowed\r\n        });\r\n        if (response === true) {\r\n          // check if existing token belongs to a different user\r\n\r\n          this.landingPageService.submitUserResponse({ id_token, state, salesforce_id: this.salesforceId }).subscribe(\r\n            res => {\r\n              const data = res;\r\n              if (data) {\r\n                if (data.isDifferentUser) {\r\n                  this.showConnectionExistsDifferentUserElement();\r\n                  return;\r\n                }\r\n                if (data.isSameUserThatAlreadyGranted) {\r\n                  this.showConnectionExistsElement();\r\n                  return;\r\n                }\r\n              }\r\n              this.landingPageService.getUserInfo(access_token).subscribe(\r\n                (result: HttpResponse<any>) => {\r\n                  this.signedInIdToken = result;\r\n                  this.givenName = '';\r\n                  if (this.signedInIdToken.given_name) {\r\n                    this.givenName = this.signedInIdToken.given_name;\r\n                  }\r\n                  this.familyName = '';\r\n                  if (this.signedInIdToken.family_name) {\r\n                    this.familyName = this.signedInIdToken.family_name;\r\n                  }\r\n\r\n                  this.showSuccessElement();\r\n                },\r\n                () => {\r\n                  this.showErrorElement();\r\n                }\r\n              );\r\n            },\r\n            () => {\r\n              this.showErrorElement();\r\n            }\r\n          );\r\n        } else {\r\n          this.showErrorElement();\r\n        }\r\n      },\r\n      () => {\r\n        this.showErrorElement();\r\n      }\r\n    );\r\n  }\r\n\r\n  submitIdTokenData(id_token: string, state: string, access_token: string) {\r\n    this.landingPageService.submitUserResponse({ id_token, state }).subscribe(\r\n      () => {\r\n        this.landingPageService.getUserInfo(access_token).subscribe(\r\n          (res: HttpResponse<any>) => {\r\n            this.signedInIdToken = res;\r\n            this.showSuccessElement();\r\n          },\r\n          () => {\r\n            this.showErrorElement();\r\n          }\r\n        );\r\n      },\r\n      () => {\r\n        this.showErrorElement();\r\n      }\r\n    );\r\n  }\r\n\r\n  submitUserDenied(state: string) {\r\n    this.landingPageService.submitUserResponse({ denied: true, state }).subscribe(\r\n      () => {\r\n        this.showDeniedElement();\r\n      },\r\n      () => {\r\n        this.showErrorElement();\r\n      }\r\n    );\r\n  }\r\n\r\n  startTimer(seconds: number) {\r\n    const timer = interval(100);\r\n    const sub = timer.subscribe(sec => {\r\n      this.progressbarValue = (sec * 100) / seconds;\r\n      this.curSec = sec;\r\n      if (this.curSec === seconds) {\r\n        sub.unsubscribe();\r\n      }\r\n    });\r\n  }\r\n\r\n  showConnectionExistsElement(): void {\r\n    this.showDenied = false;\r\n    this.showError = false;\r\n    this.showSuccess = false;\r\n    this.showConnectionExists = true;\r\n    this.loading = false;\r\n    this.showConnectionExistsDifferentUser = false;\r\n  }\r\n\r\n  showConnectionExistsDifferentUserElement(): void {\r\n    this.showDenied = false;\r\n    this.showError = false;\r\n    this.showSuccess = false;\r\n    this.showConnectionExists = false;\r\n    this.loading = false;\r\n    this.showConnectionExistsDifferentUser = true;\r\n  }\r\n\r\n  showErrorElement(): void {\r\n    this.showDenied = false;\r\n    this.showError = true;\r\n    this.showSuccess = false;\r\n    this.loading = false;\r\n    this.showConnectionExistsDifferentUser = false;\r\n  }\r\n\r\n  showDeniedElement(): void {\r\n    this.showDenied = true;\r\n    this.showError = false;\r\n    this.showSuccess = false;\r\n    this.loading = false;\r\n    this.showConnectionExistsDifferentUser = false;\r\n  }\r\n\r\n  showSuccessElement(): void {\r\n    this.showDenied = false;\r\n    this.showError = false;\r\n    this.showSuccess = true;\r\n    this.loading = false;\r\n    this.showConnectionExistsDifferentUser = false;\r\n  }\r\n}\r\n"]}]}